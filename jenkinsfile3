def gitcommit
def nuestraapp
pipeline {
      agent any
      stages {
           stage('Build') {
               steps {
                   checkout scm
                   sh "git rev-parse --short HEAD > .git/commit-id"
                   script {
                        gitcommit = readFile('.git/commit-id').trim()
                   }
               }
           }
           stage('Test') {
               steps {
                  sh 'npm install --only=dev'
                  sh 'npm test'
               }
           }
       }
       post {
            always {
                  echo 'fin'
            }
       }
}
